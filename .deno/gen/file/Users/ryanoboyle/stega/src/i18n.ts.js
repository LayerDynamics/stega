// src/i18n.ts
export class I18n {
  config;
  messages;
  currentLocale;
  constructor(config){
    this.config = config;
    this.messages = {};
    this.currentLocale = "en";
    const locale = config["locale"] || "en";
    this.currentLocale = locale;
  }
  async load() {
    try {
      const data = await Deno.readTextFile(`./locales/${this.currentLocale}.json`);
      this.messages = JSON.parse(data);
    } catch (error) {
      if (error instanceof Error) {
        console.error(`Failed to load locale ${this.currentLocale}: ${error.message}`);
      } else {
        console.error(`Failed to load locale ${this.currentLocale}: ${String(error)}`);
      }
      if (this.currentLocale !== "en") {
        await this.loadLocale("en");
      }
    }
  }
  async loadLocale(locale) {
    try {
      const data = await Deno.readTextFile(`./locales/${locale}.json`);
      this.messages = JSON.parse(data);
      this.currentLocale = locale;
    } catch (error) {
      if (error instanceof Error) {
        console.error(`Failed to load locale ${locale}: ${error.message}`);
      } else {
        console.error(`Failed to load locale ${locale}: ${String(error)}`);
      }
    }
  }
  t(key, placeholders) {
    let message = this.messages[key] || key;
    if (placeholders) {
      for (const [placeholder, value] of Object.entries(placeholders)){
        message = message.replace(`{${placeholder}}`, String(value));
      }
    }
    return message;
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvcnlhbm9ib3lsZS9zdGVnYS9zcmMvaTE4bi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaTE4bi50c1xuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnLnRzXCI7XG5cbmV4cG9ydCBjbGFzcyBJMThuIHtcblx0cHJpdmF0ZSBtZXNzYWdlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXHRwcml2YXRlIGN1cnJlbnRMb2NhbGUgPSBcImVuXCI7XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IENvbmZpZykge1xuXHRcdGNvbnN0IGxvY2FsZSA9IGNvbmZpZ1tcImxvY2FsZVwiXSBhcyBzdHJpbmcgfHwgXCJlblwiO1xuXHRcdHRoaXMuY3VycmVudExvY2FsZSA9IGxvY2FsZTtcblx0fVxuXG5cdGFzeW5jIGxvYWQoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBEZW5vLnJlYWRUZXh0RmlsZShcblx0XHRcdFx0YC4vbG9jYWxlcy8ke3RoaXMuY3VycmVudExvY2FsZX0uanNvbmAsXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5tZXNzYWdlcyA9IEpTT04ucGFyc2UoZGF0YSk7XG5cdFx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0YEZhaWxlZCB0byBsb2FkIGxvY2FsZSAke3RoaXMuY3VycmVudExvY2FsZX06ICR7ZXJyb3IubWVzc2FnZX1gLFxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XHRgRmFpbGVkIHRvIGxvYWQgbG9jYWxlICR7dGhpcy5jdXJyZW50TG9jYWxlfTogJHtTdHJpbmcoZXJyb3IpfWAsXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50TG9jYWxlICE9PSBcImVuXCIpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkTG9jYWxlKFwiZW5cIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbG9hZExvY2FsZShsb2NhbGU6IHN0cmluZykge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgRGVuby5yZWFkVGV4dEZpbGUoYC4vbG9jYWxlcy8ke2xvY2FsZX0uanNvbmApO1xuXHRcdFx0dGhpcy5tZXNzYWdlcyA9IEpTT04ucGFyc2UoZGF0YSk7XG5cdFx0XHR0aGlzLmN1cnJlbnRMb2NhbGUgPSBsb2NhbGU7XG5cdFx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGxvY2FsZSAke2xvY2FsZX06ICR7ZXJyb3IubWVzc2FnZX1gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGxvY2FsZSAke2xvY2FsZX06ICR7U3RyaW5nKGVycm9yKX1gKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR0KGtleTogc3RyaW5nLCBwbGFjZWhvbGRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogc3RyaW5nIHtcblx0XHRsZXQgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNba2V5XSB8fCBrZXk7XG5cdFx0aWYgKHBsYWNlaG9sZGVycykge1xuXHRcdFx0Zm9yIChjb25zdCBbcGxhY2Vob2xkZXIsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwbGFjZWhvbGRlcnMpKSB7XG5cdFx0XHRcdG1lc3NhZ2UgPSBtZXNzYWdlLnJlcGxhY2UoYHske3BsYWNlaG9sZGVyfX1gLCBTdHJpbmcodmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG1lc3NhZ2U7XG5cdH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxjQUFjO0FBR2QsT0FBTyxNQUFNOztFQUNKLFNBQXNDO0VBQ3RDLGNBQXFCO0VBRTdCLFlBQVksQUFBUSxNQUFjLENBQUU7U0FBaEIsU0FBQTtTQUhaLFdBQW1DLENBQUM7U0FDcEMsZ0JBQWdCO0lBR3ZCLE1BQU0sU0FBUyxNQUFNLENBQUMsU0FBUyxJQUFjO0lBQzdDLElBQUksQ0FBQyxhQUFhLEdBQUc7RUFDdEI7RUFFQSxNQUFNLE9BQU87SUFDWixJQUFJO01BQ0gsTUFBTSxPQUFPLE1BQU0sS0FBSyxZQUFZLENBQ25DLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO01BRXZDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxLQUFLLENBQUM7SUFDNUIsRUFBRSxPQUFPLE9BQWdCO01BQ3hCLElBQUksaUJBQWlCLE9BQU87UUFDM0IsUUFBUSxLQUFLLENBQ1osQ0FBQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxNQUFNLE9BQU8sQ0FBQyxDQUFDO01BRWpFLE9BQU87UUFDTixRQUFRLEtBQUssQ0FDWixDQUFDLHNCQUFzQixFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLE9BQU8sT0FBTyxDQUFDO01BRWpFO01BQ0EsSUFBSSxJQUFJLENBQUMsYUFBYSxLQUFLLE1BQU07UUFDaEMsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDO01BQ3ZCO0lBQ0Q7RUFDRDtFQUVBLE1BQU0sV0FBVyxNQUFjLEVBQUU7SUFDaEMsSUFBSTtNQUNILE1BQU0sT0FBTyxNQUFNLEtBQUssWUFBWSxDQUFDLENBQUMsVUFBVSxFQUFFLE9BQU8sS0FBSyxDQUFDO01BQy9ELElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxLQUFLLENBQUM7TUFDM0IsSUFBSSxDQUFDLGFBQWEsR0FBRztJQUN0QixFQUFFLE9BQU8sT0FBZ0I7TUFDeEIsSUFBSSxpQkFBaUIsT0FBTztRQUMzQixRQUFRLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFLE9BQU8sRUFBRSxFQUFFLE1BQU0sT0FBTyxDQUFDLENBQUM7TUFDbEUsT0FBTztRQUNOLFFBQVEsS0FBSyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsT0FBTyxFQUFFLEVBQUUsT0FBTyxPQUFPLENBQUM7TUFDbEU7SUFDRDtFQUNEO0VBRUEsRUFBRSxHQUFXLEVBQUUsWUFBOEMsRUFBVTtJQUN0RSxJQUFJLFVBQVUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUk7SUFDcEMsSUFBSSxjQUFjO01BQ2pCLEtBQUssTUFBTSxDQUFDLGFBQWEsTUFBTSxJQUFJLE9BQU8sT0FBTyxDQUFDLGNBQWU7UUFDaEUsVUFBVSxRQUFRLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxFQUFFLE9BQU87TUFDdEQ7SUFDRDtJQUNBLE9BQU87RUFDUjtBQUNEIn0=
// denoCacheMetadata=3256958259980019940,2195161903675604180